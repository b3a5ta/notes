<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Personal Notes App</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/marked/5.1.1/marked.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
</head>
<body>
    <!-- Toast Notification -->
    <div id="toast" class="toast hidden">
        <div class="toast__content">
            <span id="toast-message"></span>
        </div>
    </div>

    <!-- Header -->
    <header class="header">
        <div class="header__container">
            <div class="header__left">
                <h1 class="header__title">
                    <span class="header__icon">üìù</span>
                    Personal Notes
                </h1>
            </div>
            
            <div class="header__center">
                <div class="search-container">
                    <input 
                        type="text" 
                        id="global-search" 
                        class="search-input" 
                        placeholder="Search notes..."
                    >
                </div>
            </div>
            
            <div class="header__right">
                <div class="sync-status" id="sync-status">
                    <span class="sync-indicator synced"></span>
                    <span class="sync-text">Synced</span>
                </div>
                <button id="dark-mode-toggle" class="btn btn--secondary btn--sm" title="Toggle Dark Mode">
                    <span class="theme-icon">üåô</span>
                </button>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="main-container">
        <!-- Sidebar -->
        <aside class="sidebar" id="sidebar">
            <div class="sidebar__content">
                <!-- New Note Button -->
                <button id="new-note-btn" class="btn btn--primary btn--full-width">
                    <span>‚úèÔ∏è</span>
                    New Note
                </button>

                <!-- Tag Filters -->
                <div class="filter-section">
                    <h3 class="filter-title">Filter by Tags</h3>
                    <div id="tag-filters" class="tag-filters">
                        <!-- Dynamic tag filters will be inserted here -->
                    </div>
                    <button id="clear-filters" class="btn btn--outline btn--sm">Clear Filters</button>
                </div>

                <!-- Notes List -->
                <div class="notes-section">
                    <h3 class="section-title">Notes</h3>
                    <div id="notes-list" class="notes-list">
                        <!-- Notes will be dynamically inserted here -->
                    </div>
                </div>

                <!-- Settings Section -->
                <div class="settings-section">
                    <button id="github-settings-btn" class="btn btn--outline btn--sm btn--full-width">
                        ‚öôÔ∏è GitHub Settings
                    </button>
                    <button id="export-btn" class="btn btn--outline btn--sm btn--full-width">
                        üì• Export to Excel
                    </button>
                </div>
            </div>
        </aside>

        <!-- Editor Panel -->
        <div class="editor-panel" id="editor-panel">
            <div class="editor-header">
                <input 
                    type="text" 
                    id="note-title" 
                    class="note-title-input" 
                    placeholder="Enter note title..."
                >
                <div class="editor-actions">
                    <button id="toggle-preview" class="btn btn--secondary btn--sm">
                        üëÅÔ∏è Preview
                    </button>
                    <button id="save-note" class="btn btn--primary btn--sm">
                        üíæ Save
                    </button>
                    <button id="delete-note" class="btn btn--outline btn--sm" style="display: none;">
                        üóëÔ∏è Delete
                    </button>
                </div>
            </div>

            <div class="editor-content">
                <textarea 
                    id="note-content" 
                    class="note-editor" 
                    placeholder="Start writing your note in Markdown..."
                ></textarea>
                
                <div class="tags-input-container">
                    <input 
                        type="text" 
                        id="note-tags" 
                        class="tags-input" 
                        placeholder="Add tags (press Enter or comma to separate)..."
                    >
                    <div id="tag-suggestions" class="tag-suggestions hidden"></div>
                </div>
                
                <div id="current-tags" class="current-tags">
                    <!-- Current note tags will be displayed here -->
                </div>
            </div>
        </div>

        <!-- Preview Panel -->
        <div class="preview-panel" id="preview-panel">
            <div class="preview-header">
                <h3>Preview</h3>
                <button id="close-preview" class="btn btn--secondary btn--sm">‚úï</button>
            </div>
            <div id="preview-content" class="preview-content">
                <div class="empty-state">
                    <p>Start writing to see preview...</p>
                </div>
            </div>
        </div>
    </main>

    <!-- GitHub Settings Modal -->
    <div id="github-modal" class="modal hidden">
        <div class="modal__backdrop" id="modal-backdrop"></div>
        <div class="modal__content">
            <div class="modal__header">
                <h2>GitHub Settings</h2>
                <button id="close-modal" class="btn btn--secondary btn--sm">‚úï</button>
            </div>
            <div class="modal__body">
                <div class="form-group">
                    <label class="form-label" for="github-username">GitHub Username</label>
                    <input type="text" id="github-username" class="form-control" placeholder="your-username">
                </div>
                <div class="form-group">
                    <label class="form-label" for="github-repo">Repository Name</label>
                    <input type="text" id="github-repo" class="form-control" placeholder="notes-app">
                </div>
                <div class="form-group">
                    <label class="form-label" for="github-token">Personal Access Token</label>
                    <input type="password" id="github-token" class="form-control" placeholder="ghp_...">
                    <small class="help-text">
                        Create a token with 'repo' permissions at 
                        <a href="https://github.com/settings/tokens" target="_blank">GitHub Settings</a>
                    </small>
                </div>
                <div class="form-group">
                    <label class="form-label" for="github-filepath">Excel File Path</label>
                    <input type="text" id="github-filepath" class="form-control" placeholder="notes-data.xlsx">
                </div>
            </div>
            <div class="modal__footer">
                <button id="test-connection" class="btn btn--outline">Test Connection</button>
                <button id="save-github-settings" class="btn btn--primary">Save Settings</button>
            </div>
        </div>
    </div>

    <!-- Delete Confirmation Modal -->
    <div id="delete-modal" class="modal hidden">
        <div class="modal__backdrop"></div>
        <div class="modal__content">
            <div class="modal__header">
                <h2>Delete Note</h2>
            </div>
            <div class="modal__body">
                <p>Are you sure you want to delete this note? This action cannot be undone.</p>
                <p><strong id="delete-note-title"></strong></p>
            </div>
            <div class="modal__footer">
                <button id="cancel-delete" class="btn btn--outline">Cancel</button>
                <button id="confirm-delete" class="btn btn--primary">Delete</button>
            </div>
        </div>
    </div>

    <!-- Welcome Modal -->
    <div id="welcome-modal" class="modal hidden">
        <div class="modal__backdrop"></div>
        <div class="modal__content">
            <div class="modal__header">
                <h2>Welcome to Personal Notes App</h2>
            </div>
            <div class="modal__body">
                <p>This is your personal notes application with Markdown support, tagging, and Excel storage.</p>
                <h4>Quick Start:</h4>
                <ul>
                    <li>Click "New Note" to create your first note</li>
                    <li>Write in Markdown and see live preview</li>
                    <li>Add tags to organize your notes</li>
                    <li>Use search to find notes quickly</li>
                    <li>Configure GitHub settings to sync your notes</li>
                </ul>
                <p>Sample notes have been loaded to get you started!</p>
            </div>
            <div class="modal__footer">
                <button id="close-welcome" class="btn btn--primary">Get Started</button>
            </div>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html>